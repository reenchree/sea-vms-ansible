---
vm_hosts:
  hosts:
    pegasus:
      ansible_host: 192.168.0.253

  vars:
    ansible_port: 22
    ansible_user: pi

    # ZFS configuration
    zfs_pool_name: vmpool
    zfs_pool_type: raidz1
    zfs_pool_devices:
      - /dev/sda
      - /dev/sdb
      - /dev/sdc
      - /dev/sdd

    # Network configuration
    # VLAN 50 for services (192.168.50.0/24)
    # Trunk port on enp4s0 carries all VLANs
    primary_interface: enp4s0
    vlan_id: 50
    vlan_bridge_name: br-vlan50
    default_bridge_name: br0

    # Bridge MAC inheritance (keeps same IP from DHCP)
    bridge_inherit_mac: true
    physical_interface_mac: a8:29:48:24:aa:5d

    # Libvirt configuration
    libvirt_storage_pool_path: /vmpool

    # NUT Client configuration
    nut_client_ups: ups
    nut_client_server: 192.168.0.251
    nut_client_username: observer
    nut_client_password: password_observer
    nut_client_type: secondary
    nut_client_state: started
    nut_client_enabled: true
    nut_client_shutdowncmd: "/usr/local/bin/vm-host-shutdown"
    nut_client_finaldelay: 10  # Final delay before host shutdown
    nut_vm_shutdown_timeout: 300  # Max time to wait for VMs (5 minutes)
